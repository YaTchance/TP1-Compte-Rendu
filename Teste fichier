
#include "Emprunt.h"
#include "Lecteur.h"
#include "date.h"
#include "livre.h"
#include <assert.h>
#include <iostream>
#include <vector>

std::ostream &operator<<(std::ostream &os,
                         const std::vector<std::string> &Blilio) {
  os << "Blibliothèque: ";
  for (auto number : Blilio)
   os <<  number << " ";
  os << std::endl;
  return os;
}

int main(int argc, char const *argv[]) {
  int numérodulivre;

  /*****************************************************************************************************************/
  // Lecteur
  /*****************************************************************************************************************/
  Person p1("Tchance", "Ya"); // Objet de type Person
  Person p2("Flavien", "David");
  Person p3("Morganne", "Belle");

  /*****************************************************************************************************************/
  // Auteur
  /*****************************************************************************************************************/
  Auteur A1("n-258985", "Molière", "", "1622,01,15");
  Auteur A2("n-258875", "Albert", "Camus", "1913,08,07");
  Auteur A3("n-258800", "Joseph", "Jacobs", "1854,08,29");
  Auteur A4("n-258960", "Sarah", "Rivens", "2022,08,12");
  Auteur A5("n-258900", "JEAN ", "DE LA FONTAINE",
            "1684,04,24"); // 24 avril 1684
  Auteur A6(std::string IDnume, std::string firstname, std::string lastname,
            std::string born);

    /*****************************************************************************************************************/
  // Livre
  /*****************************************************************************************************************/
  Date datePublication(1968, 9, 8);
  Livre livre(A1, "L'avare", Genres::Comédie, Langues::Français,
              "978-2-7454-9010-0", datePublication);

  Date datePublication1(2002, 7, 10);
  Livre livre1(A2, "L'Étranger", Genres::Romance, Langues::Français,
               "978-2-7454-9020-0", datePublication1);

  Date datePublication3(1890, 6, 15);
  Livre livre2(A3, "Three Little Pigs", Genres::Conte, Langues::Anglais,
               "978-2-7454-9030-0", datePublication3);

  Date datePublication4(2022, 8, 24);
  Livre livre3(A4, "Captive", Genres::Romance, Langues::Français,
               "978-2-7454-9040-0", datePublication4);
  // 27/08/2003
  Date datePublication5(2003, 8, 27);
  Livre livre4(A5, "FABLES", Genres::Conte, Langues::Français,
               "978-2-7454-9050-0", datePublication4);

  // Date datePublication5(2022, 8, 24);
  Date datePublication5(2003, 8, 27);
  Livre livre6(A5, "FABLES", Genres::Conte, Langues::Français,
               "978-2-7454-9050-0", datePublication4);
  
  /*****************************************************************************************************************/
  // Emprunt
  /*****************************************************************************************************************/
  Date take(2022, 01, 17);
  Date retun(2022, 01, 17);
  retun.returnbook();
  Emprunt emprunt(take, retun);

  Date take1(2022, 01, 28);
  Date retun1(2022, 01, 28);
  retun1.returnbook();
  Emprunt emprunt1(take1, retun1);

  Date take2(2022, 01, 15);
  Date retun2(2022, 01, 15);
  retun2.returnbook();
  Emprunt emprunt2(take2, retun2);

  Date take3(2022, 01, 15);
  Date retun3(2022, 01, 15);
  retun3.returnbook();
  Emprunt emprunt3(take3, retun3);

  
  Date take4(2022, 01, 15);
  Date retun4(2022, 01, 15);
  retun4.returnbook();
  Emprunt emprunt4(take4, retun4);

 Date take5(2022, 01, 15);
  Date retun5(2022, 01, 15);
  retun5.returnbook();
  Emprunt emprunt5(take5, retun5);
  /*****************************************************************************************************************/
  // Vecteur Blibliothèque
  /*****************************************************************************************************************/
   std::vector<std::string> AjoutBook;
  std::vector<std::string> Bliblio = {
      "\n ",
      "\n Le livre numéro: 1 ",
      "\n Auteur: " + livre.getAuteur().getFullNameAuteur(),
      "\n Titre: " + livre.getTitre(),
      "\n Langue: " + toStringLangue(livre.getLangue()),
      "\n ISBN: " + livre.getISBN(),
      "\n Date de publication: " + toString(livre.getDatePublication()),
 "\n**************************************************************************************************"
      "\n ",
      "\n Le livre numéro: 2 ",
      "\n Auteur: " + livre1.getAuteur().getFullNameAuteur(),
      "\n Titre: " + livre1.getTitre(),
      "\n Langue: " + toStringLangue(livre1.getLangue()),
      "\n ISBN: " + livre1.getISBN(),
      "\n Date de publication: " + toString(livre1.getDatePublication()),
 "\n**************************************************************************************************"
      "\n ",
      "\n Le livre numéro: 3 ",
      "\n Auteur: " + livre2.getAuteur().getFullNameAuteur(),
      "\n Titre: " + livre2.getTitre(),
      "\n Langue: " + toStringLangue(livre2.getLangue()),
      "\n ISBN: " + livre2.getISBN(),
      "\n Date de publication: " + toString(livre2.getDatePublication()),
 "\n**************************************************************************************************"
      "\n ",
      "\n Le livre numéro: 4",
      "\n Auteur: " + livre3.getAuteur().getFullNameAuteur(),
      "\n Titre: " + livre3.getTitre(),
      "\n Langue: " + toStringLangue(livre3.getLangue()),
      "\n ISBN: " + livre3.getISBN(),
      "\n Date de publication: " + toString(livre3.getDatePublication()),
 "\n**************************************************************************************************"
      "\n ",
      "\n Le livre numéro: 5 ",
      "\n Auteur: " + livre4.getAuteur().getFullNameAuteur(),
      "\n Titre: " + livre4.getTitre(),
      "\n Langue: " + toStringLangue(livre3.getLangue()),
      "\n ISBN: " + livre4.getISBN(),
      "\n Date de publication: " + toString(livre4.getDatePublication()),
   "\n*************************************************************************************************"
 
  "\n*************************************************************************************************\n",

  };


   for (auto it = AjoutBook.begin(); it != AjoutBook.end(); ++it)
      AjoutBook.push_back(*it);

  /*****************************************************************************************************************/
  // Start du programme
  /*****************************************************************************************************************/
  bool disponible = true;
  int Choix;
  int i = 0;
  bool newbook =false;
  
  std::cout << "\n Bonjour à vous,\n je suis votre guide pour votre recherche "
               "d'ouvrage \n ";
  std::cout << "\n*************************************************************"
               "*************************************";
  while (i < 5) {

    std::cout << "\n";
    std::cout
        << "Veuillez choisir l'une des options en saisisant le numéro : \n "
           "1 : Choisir un livre \n OU \n 2 : Ajouter un livre : \n";
      std::cout << "\n*************************************************************"
               "*************************************\n";
    std::cin >> Choix;
    
/*****************************************************************************************************************
// Sécurity si on ne met pas : 1 ou 2 
****************************************************************************************************************/
    
    if (Choix >2) {  std::cout
          << "Cettte option n'est pas dans la liste de choix" << 
      "\n**************************************************************************************************"<<std::endl;}
      else if (Choix < 1) {  std::cout
          << "Cettte option n'est pas dans la liste de choix" <<
        "\n**************************************************************************************************"<<std::endl;}

/*****************************************************************************************************************
// Bonne validation de l'option :
****************************************************************************************************************/  
        
    else if (Choix == 1) {
      
/*****************************************************************************************************************
// Domaine Blibliotheque
****************************************************************************************************************/

       std::cout<<Bliblio;

/*****************************************************************************************************************
// Programme pour la disponibilité du livre
****************************************************************************************************************/

      std::cout << "Pour savoir la disponibilité de votre livre.\n Vueillez "
                   "saisir le numéro du livre : \n";
      std::cout << "\n";
      std::cin >> numérodulivre;
      std::cout << "\n**************************************************************************************************\n";
      if (numérodulivre == 1 && disponible ==  true) {
        std::cout << p1.getFullName() << "\n"
                  << emprunt << "\n"
                  << livre << "\n**********************************************************"
                  << std::endl;

      } else if (numérodulivre == 2 && disponible == true) {
        std::cout << p2.getFullName() << "\n"
                  << emprunt1 << "\n"
                  << livre1 << "\n**********************************************************"
                  << std::endl;

      } else if (numérodulivre == 3 && disponible == true) {
        std::cout << p1.getFullName() << "\n"
                  << emprunt2 << "\n"
                  << livre2 << "\n**********************************************************"
                  << std::endl;

      } else if (numérodulivre == 4 && disponible == true) {
        std::cout << p3.getFullName() << "\n"
                  << emprunt3 << "\n"
                  << livre3 <<"\n**********************************************************"
                  << std::endl;
      } else if (numérodulivre == 5 && disponible == true) {
        std::cout << p3.getFullName() << "\n"
                  << emprunt3 << "\n"
                  << livre4 << "\n**********************************************************"
                  << std::endl; }
    else if (numérodulivre == 6 && disponible == true && newbook ==true) {
        std::cout << "Disponible" << "\n"
                  << "\n"
                  << livre4 << "\n**********************************************************"
                  << std::endl;}
      else if (numérodulivre == 7 && disponible == true && newbook ==true) {
        std::cout << "Disponible" << "\n"
                  << "\n"
                  << livre4 << "\n**********************************************************"
                  << std::endl;
      } 
       else {
        std::cout << "n'est pas disponible" << std::endl;
      }
/*****************************************************************************************************************
// Programme pour l'ajout d'un livre
****************************************************************************************************************/
    } else if (Choix==2){
    newbook =true;

    std::cout
          << "\n************************************************************************************************** \n "
      "Pour ajouter un auteur dans la blibliothèque !" 
      "\n Merci de suivre exactement ces instructions ! \n "
      "\n 1 : L'identité numérique du livre (ex : n-xxxxxx )\n"
      "\n 2: Le prénom de l'auteur \n"
     "\n 3: Le nom de l'auteur \n "
      "\n 4: La date de naissance de l'auteur (ex : xxxx,xx,xx)\n"
      "\n 5: Le titre \n " 
      "\n 6: Genre (ex : Conte, Action, Policier ect..)\n"
      "\n 7: Langue ( ex : Français, Anglais, Espagnol, Allemand ect..)\n"
      "\n 8: ISBN (ex: xxx-x-xxxx-xxxx-x)\n"
      "\n 9: Date de publication (ex: xxxx,xx,xx) \n"
        "\n Merci de votre comprhésion ! \n"
          << "\n******************************************************************"<<std::endl;
       std::cout << "\n Start \n";
      std::string IDnume;
      std::string firstname;
      std::string lastname;
      std::string born;
      std::string titre;
      std::string genre;
    Genres genres = Genres::Policier;
     Std::string langues;
  Langues
      std::string ISBN = "987-9-9874-9874-0";
      std::string datePublication = "2003, 8, 27";

      std::cout << "1) ",std::cin >> IDnume;  
     std::cout << "2) ",std::cin >> firstname;
    std::cout << "3) ",std::cin >> lastname;
    std::cout << "4) ",std::cin >> born;
    std::cout << "5) ",std::cin >> titre;
    std::cout << "6) ",std::cin >> genres;
    std::cout << "7) ",std::cin >> Langues;
    std::cout << "8) ",std::cin >> isISBN;
    std::cout << "9) ",std::cin >> datePublication;
      Auteur A5(IDnume, firstname, lastname, born);
       Livre livre6(A5, titre, genre, langue,
               ISBN, datePublication);
      // langue, std::string ISBN, Date datePublication);

      Date datePublication5(2003, 8, 27);
  Livre livre4(A5, "FABLES", Genres::Conte, Langues::Français,
               "978-2-7454-9050-0", datePublication4);

      std::cout << "\n";
      std::cout << "Création de l'auteur avec succes ! \n"
                << A5.getFullNameAuteur() << livre6 << std::endl;
    
      std::cout << "\n********************************************************************************************\n";

      AjoutBook.push_back(
          "\n livre ajoutée : \n Auteur : " + A5.getFullNameAuteur() + "\n Titre : "+livre6.getTitre() +"\n Langue : "
          +toStringLangue(livre6.getLangue()) + "\n ISBN : "+livre6.getISBN() +"\n Date de publication : "+
          toString(livre6.getDatePublication()));
  
Bliblio.insert(Bliblio.end(), AjoutBook.begin(), AjoutBook.end());

      std::cout << Bliblio;
    std::cout << "\n********************************************************************************************\n";
    }
    //}
  
}
}